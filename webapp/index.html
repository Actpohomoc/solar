<!doctype html>
<html lang="en" ng-app="hex">
<head>
    <meta charset="UTF-8">
    <title>PV battery monitor</title>
    <link href="//fonts.googleapis.com/css?family=Droid+Sans Mono:400" rel="stylesheet" type="text/css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/angular-ui-tree.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">

</head>
<body ng-controller="main">




<nav class="navbar navbar-inverse navbar-default nav-padless" role="navigation">
    <div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Battery Monitor</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#" ng-click="sendRefresh();">Обновить</a></li>
                <li><a href="#about">About</a></li>


            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<div class="container">



        <form class="form-signin" ng-if="login_not_done">
            <h2 class="form-signin-heading">Please sign in</h2>
            <label for="inputEmail" class="sr-only"">Email address</label>
            <input id="inputEmail" class="form-control" placeholder="Email address" required autofocus ng-model="login">
            <label for="inputPassword" class="sr-only">Password</label>
            <input type="password" id="inputPassword" class="form-control" placeholder="Password" required  ng-model="password">
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="remember-me"> Remember me
                </label>
            </div>
            <button class="btn btn-lg btn-primary btn-block" type="submit" ng-click="setConnection(login,password);">Sign in</button>
        </form>




    <div class="centerimg">
        <img src="img/bg1.png">
        <div class="floatparams">V=<span class="red">{{pvVoltage}}В</span> I=<span class="blue">{{pvCurrent}}А</span> <br>P= <span class="green">{{pvVoltage*pvCurrent}}Вт</span></div>
        <div class="floatparams2"><span class="red">{{gridVoltage}}В</span>@<span class="blue">{{gridFrequency}}Гц</span></div>
        <div class="floatparams3">
            <p ng-if="chargingCurrent > 0">Заряд</p>
            <p ng-if="batDischargeCurrent > 0">Разряд </p>
            <span class="red">{{batteryVoltage}}В</span>@<span class="blue">{{chargingCurrent+batDischargeCurrent}}А</span>
        </div>
    </div>

    <div class="rightsection">
        <table class="table table-striped">
            <tr>
                <th class="tg-031e">Параметр</th>
                <th class="tg-031e">Значение</th>
            </tr>
            <tr>
                <td class="tg-031e">Активная мощность</td>
                <td class="tg-031e">{{outputActivePower}}Вт</td>
            </tr>
            <tr>
                <td class="tg-031e">Общая мощность</td>
                <td class="tg-031e">{{outputApparentPower}}Вт</td>
            </tr>
            <tr>
                <td class="tg-031e">Коеффициент мощности  </td>
                <td class="tg-031e">{{(outputActivePower / outputApparentPower).toPrecision(2)}}  </td>
            </tr>

            <tr>
                <td class="tg-031e">Напряжение выход  </td>
                <td class="tg-031e">{{outputVoltage}}В  </td>
            </tr>

            <tr>
                <td class="tg-031e">Частота выход</td>
                <td class="tg-031e">{{outputFrequency}}Гц  </td>
            </tr>

            <tr>
                <td class="tg-031e">Нагрузка</td>
                <td class="tg-031e">{{batteryVoltage}}%</td>
            </tr>
        </table>


    </div>


    <div style="clear: both;" class="col-md-6">

        <h1>Рабочие параметры</h1>

        <table class="table table-striped">
            <tr>
                <th class="tg-031e">Режим</th>
                <th class="tg-031e">Значение</th>
            </tr>
            <tr>
                <td class="tg-031e">Режим работы</td>
                <td class="tg-031e">{{workMode}}</td>
            </tr>
            <tr>
                <td class="tg-031e">Источник зарядки</td>
                <td class="tg-031e">{{chargeSource}}</td>
            </tr>
            <tr>
                <td class="tg-031e">Тип нагрузки</td>
                <td class="tg-031e">{{loadSource}}</td>
            </tr>

        </table>

    </div>


    <div class="col-md-12">

        <h1>Настройки</h1>

        <table class="table table-striped">
            <tr>
                <th class="tg-031e">Парметр</th>
                <th class="tg-031e">Значение</th>
            </tr>
            <tr>
                <td class="tg-031e">Приоритет зарядки</td>
                <td class="tg-031e">
                    <div class="btn-group">
                        <label class="btn btn-primary" ng-model="chargePri" btn-radio="'Utility'"  >Сеть</label>
                        <label class="btn btn-primary" ng-model="chargePri" btn-radio="'Solar first'">Cначала солнце</label>
                        <label class="btn btn-primary" ng-model="chargePri" btn-radio="'Utility and Solar'">Солнце и сеть</label>
                        <label class="btn btn-primary" ng-model="chargePri" btn-radio="'Solar only'">Только солнце</label>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="tg-031e">Приоритет питания нагрузки </td>
                <td class="tg-031e">
                    <div class="btn-group">
                        <label class="btn btn-primary" ng-model="loadPri" btn-radio="'Utility'" ng-click="changeLoad(loadPri);">Сеть</label>
                        <label class="btn btn-primary" ng-model="loadPri" btn-radio="'Solar'" ng-click="changeLoad(loadPri);">Инвертор</label>
                        <label class="btn btn-primary" ng-model="loadPri" btn-radio="'SBU'" ng-click="changeLoad(loadPri);">Солн-Бат-Сеть</label>
                    </div> <span id="load_ajax"></span>
                </td>
            </tr>


        </table>

    </div>


</div>



    <script src="lib/jquery-1.11.1.js"></script>
    <script src="lib/jquery.mousewheel.js"></script>
    <script src="lib/bootstrap.min.js"></script>
    <script src="lib/devicehive.js"></script>
    <script src="lib/angular.min.js"></script>
    <script src="lib/angular-ui-tree.js"></script>
    <script src="lib/ui-bootstrap-tpls-0.12.0.js"></script>
    <script src='lib/scalyr.js'></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="js/app.js"></script>
    <script src="lib/localforage.js"></script>
    <script src="js/directives.js"></script>
    <script src="js/controllers.js"></script>

<!--    <script src="js/calc_eval.js"></script> -->

</body>
</html>